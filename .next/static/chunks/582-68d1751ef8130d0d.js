"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[582],{6489:function(e,t){t.Z={src:"/_next/static/media/himachal_logoo.ed7ce3ac.svg",height:272,width:383}},7242:function(e,t,i){i(5893)},9809:function(e,t,i){var a=i(5893);i(7294);var n=i(7109),s=i(7709),r=i(3340),l=i(4054),o=i(2761);let d=e=>(0,a.jsxs)(l.Z,{style:{width:"100%"},children:[(0,a.jsx)(r.Z,{htmlFor:"outlined-adornment-amount",children:"Search Ration Card"}),(0,a.jsx)(s.Z,{onChange:t=>e.onSearch(t.target.value),value:e.value,startAdornment:(0,a.jsx)(n.Z,{position:"end",children:(0,a.jsx)(o.Z,{color:"primary"})}),label:"Search Ration Card"})]});t.Z=d},3788:function(e,t,i){i.d(t,{Z:function(){return N}});var a=i(5893),n=i(7294),s=i(2293),r=i(7357),l=i(7720),o=i(7533),d=i(3946),c=i(2165),h=i(8462),x=i(7212),m=i(8619),g=i(8885),u=i(9334),p=i(6448),j=i(326),f=i(155),Z=i(5861);i(7242);var b=i(6489),y=i(5675),S=i.n(y),v=i(1163),w=i(7379),P=i(948),k=i(1233),C=i(9417),F=i(8333),z=i(8972),W=i(8201);(0,P.ZP)(h.Z)({"& .MuiListItemButton-root":{paddingLeft:24,paddingRight:24},"& .MuiListItemIcon-root":{minWidth:0,marginRight:16},"& .MuiSvgIcon-root":{fontSize:20}});var N=function(e){let{window:t}=e,{children:i}=e,y=(0,v.useRouter)(),P=(0,w.usePathname)(),[N,R]=n.useState(!1),[L,M]=n.useState(null),q=()=>{R(!N)},A=e=>{M(e.currentTarget)},E=()=>{M(null)},I=(0,a.jsxs)("div",{style:{},children:[(0,a.jsxs)(f.Z,{children:[(0,a.jsx)(S(),{src:b.Z,width:50,height:30,alt:"Logo"}),(0,a.jsxs)(Z.Z,{variant:"h6",noWrap:!0,component:"div",marginLeft:2,children:["Parivar Register",(0,a.jsx)("br",{})," (Urban)"]})]}),(0,a.jsx)(h.Z,{style:{marginTop:20},children:["Dashboard","Survey","Registration"].map((e,t)=>(0,a.jsx)(x.ZP,{disablePadding:!0,sx:{borderRight:P.startsWith("/"+e.toLowerCase())?"4px solid #074465   ":"0px solid #FFFFFF"},className:P.startsWith("/"+e.toLowerCase())?" text-[#074465] bg-[#f2f5f9] bg-white":"text-slate-700",onClick:()=>y.push("/"+e.toLowerCase()),children:(0,a.jsxs)(m.Z,{children:[(0,a.jsx)(g.Z,{className:P.startsWith("/"+e.toLowerCase())?"text-[#074465]":"text-slate-700",children:t%2==0?(0,a.jsx)(c.Z,{}):(0,a.jsx)(p.Z,{})}),(0,a.jsx)(u.Z,{sx:{transition:"color 0.3s","&:hover":{color:"#074465"}},primaryTypographyProps:{fontSize:"14px"},primary:e})]})},e))}),(0,a.jsx)(l.Z,{}),(0,a.jsx)(h.Z,{children:["About Us","Contact Us"].map((e,t)=>(0,a.jsx)(x.ZP,{disablePadding:!0,className:P.startsWith("/"+e.toLowerCase())?" text-[#074465] bg-[#f2f5f9] bg-white":"text-slate-700",children:(0,a.jsxs)(m.Z,{children:[(0,a.jsx)(g.Z,{children:t%2==0?(0,a.jsx)(c.Z,{}):(0,a.jsx)(p.Z,{})}),(0,a.jsx)(u.Z,{sx:{transition:"color 0.3s","&:hover":{color:"#074465"}},primaryTypographyProps:{fontSize:"14px"},primary:e})]})},e))})]});return(0,a.jsxs)(r.Z,{sx:{display:"flex"},children:[(0,a.jsx)(s.Z,{position:"fixed",enableColorOnDark:!1,sx:{width:{sm:"calc(100% - ".concat(260,"px)")},ml:{sm:"".concat(260,"px")},bgcolor:"#FFF",color:"#000"},children:(0,a.jsxs)(f.Z,{elevation:0,children:[(0,a.jsx)(d.Z,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:q,sx:{mr:2,display:{sm:"none"}},children:(0,a.jsx)(j.Z,{})}),(0,a.jsxs)(k.Z,{direction:"row",spacing:2,children:[(0,a.jsx)(C.Z,{color:"inherit",onClick:A,children:(0,a.jsx)(W.Z,{})}),(0,a.jsxs)(F.Z,{anchorEl:L,open:Boolean(L),onClose:E,children:[(0,a.jsx)(z.Z,{onClick:E,children:"Profile"}),(0,a.jsx)(z.Z,{onClick:E,children:"Settings"}),(0,a.jsx)(z.Z,{onClick:E,children:"Logout"})]})]})]})}),(0,a.jsxs)(r.Z,{component:"nav",sx:{width:{sm:260},flexShrink:{sm:0}},"aria-label":"mailbox folders",children:[(0,a.jsx)(o.ZP,{container:void 0!==t?()=>t().document.body:void 0,variant:"temporary",open:N,onClose:q,ModalProps:{keepMounted:!0},sx:{display:{xs:"block",sm:"none"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:260,borderWidth:0}},children:I}),(0,a.jsx)(o.ZP,{variant:"permanent",anchor:"left",PaperProps:{style:{backgroundColor:"#FFFFFF",overflow:"hidden"}},sx:{display:{xs:"none",sm:"block"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:260,borderWidth:0}},open:!0,children:I})]}),(0,a.jsxs)(r.Z,{sx:{width:"100%",minHeight:"100vh",backgroundColor:"#f2f5f9",margin:0,padding:0,borderRadius:5},children:[(0,a.jsx)(f.Z,{}),(0,a.jsx)("main",{className:"flex-none transition-all",children:i})]})]})}},5044:function(e,t,i){i.d(t,{Jq:function(){return l}});var a=i(2894),n=i(2085);let s=e=>({type:n.A4,payload:e}),r=e=>({type:n.$q,payload:e}),l=e=>async t=>{try{let i=await a.Z.get("/survey/report/count?wardId=".concat(e),{});console.log(i,"dashboard response"),t(s(i.data))}catch(n){t(r(n))}}},1005:function(e,t,i){i.d(t,{Ap:function(){return l}});var a=i(2894),n=i(2085);let s=e=>({type:n.ak,payload:e}),r=e=>({type:n.gK,payload:e}),l=e=>async t=>{try{let i=await a.Z.get("/fetch-ration-details",{params:{rationCardNo:e}});console.log(i,"Ration response"),t(s(i.data))}catch(n){t(r(n))}}},2894:function(e,t,i){var a=i(6154),n=i(662);let s=a.Z.create({baseURL:"https://himstaging1.hp.gov.in/urban-dept"});(0,n.LP)(),s.interceptors.request.use(e=>e),t.Z=s},9582:function(e,t,i){i.r(t),i.d(t,{default:function(){return O}});var a=i(5893),n=i(7294);i(9809);var s=i(6886),r=i(1791),l=i(1994),o=i(7357),d=i(3946),c=i(7720),h=i(7918),x=i(5861);i(1005);var m=i(9473),g=i(422),u=i(3592),p=i(9572),j=i(2894),f=i(2085);let Z=e=>({type:f.xz,payload:e}),b=e=>({type:f.aD,payload:e}),y=(e,t)=>async i=>{try{let a=await j.Z.get("familyList?page=".concat(e,"&size=10&wardId=").concat(t),{});console.log(a,"dashboard response"),i(Z(a.data))}catch(n){i(b(n))}},S=e=>({type:f.gr,payload:e}),v=e=>({type:f.Fn,payload:e}),w=(e,t)=>async i=>{try{let a=await j.Z.get("/familyDetail?himParivarId=".concat(e,"&rationCardNo=").concat(t),{});console.log(a,"dashboard response"),i(S(a.data))}catch(n){i(v(n))}};var P=i(5697),k=i.n(P),C=i(6242);let F=e=>(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(o.Z,{sx:{gap:3,display:"grid",gridTemplateColumns:{md:"repeat(4, 1fr)",sm:"repeat(2, 1fr)",xs:"repeat(1, 1fr)"}},children:e.top_header_data&&e.top_header_data.map(e=>(0,a.jsxs)(C.Z,{elevation:10,sx:{alignItems:"center",backgroundColor:"#FFF",borderRadius:1,p:2,"&:hover":{transform:"scale(1.03)"}},children:[(0,a.jsx)(x.Z,{color:"primary",variant:"overline",children:e.label}),(0,a.jsx)(x.Z,{variant:"h5",color:e.color,children:e.value})]},e.label))})});F.propTypes={stats:k().array};var z=i(7906),W=i(295),N=i(8102),R=i(2882),L=i(3184),M=i(2171),q=i(3816);let A=[{id:"headOfFamily",label:"Head of Family",minWidth:170},{id:"rationCardNo",label:"Ration No.",minWidth:100},{id:"municipalName",label:"Municipality",minWidth:170,align:"right"},{id:"economicStatus",label:"Economic Status",minWidth:170,align:"right"},{id:"wardName",label:"Ward Name",minWidth:170,align:"right",format:e=>e.toFixed(2)},{id:"socialCategory",label:"Social Category",minWidth:170,align:"right",format:e=>e.toFixed(2)},{id:"religion",label:"Religion",minWidth:170,align:"right",format:e=>e.toFixed(2)},{id:"residentStatus",label:"Resident",minWidth:170,align:"right",format:e=>e.toFixed(2)}],E={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"75%",bgcolor:"background.paper",boxShadow:30,maxHeight:"80vh",overflow:"hidden",overflowY:"auto",p:4,borderRadius:1},I=e=>{let{totalFamilyCount:t,totalMemberCount:i,wardFamilyCount:j,wardMemberCount:f}=e.dashboardData||{},[Z,b]=(0,n.useState)(""),[S,v]=n.useState([0]),[P,k]=(0,n.useState)([]),[C,I]=(0,n.useState)([]),[T,D]=(0,n.useState)({}),[_,B]=(0,n.useState)(!1),[O,H]=(0,n.useState)(!1),[U,Y]=(0,n.useState)(!1),[J,K]=n.useState(0),[V,Q]=n.useState(10),[G,$]=(0,n.useState)(0),X=(0,m.I0)(),ee=(0,m.v9)(e=>e.familiesList),et=(0,m.v9)(e=>e.familiesDetailApi),ei=(e,t)=>{K(t)},ea=e=>{Q(+e.target.value),K(0)};return(0,n.useEffect)(()=>{if(console.log(et,"Aasdsadsdajoiskdlqwiuadjsckfweoa"),(null==et?void 0:et.data)&&_){let{data:e,status:t,message:i,rationCardAlreadyExists:a}=ee.data||{};Y(!0),D(et.data),B(!1)}},[et]),(0,n.useEffect)(()=>{if(console.log(ee,"Aasdsadsdajoiskdlqwiuadjsckfweoa"),null==ee?void 0:ee.data){let{data:e,status:t,message:i,rationCardAlreadyExists:a}=ee.data||{};I(ee.data)}},[ee]),(0,n.useEffect)(()=>{X(y(0,99))},[]),(0,a.jsxs)("main",{className:"p-6 space-y-6",children:[(0,a.jsx)(s.ZP,{xs:12,children:(0,a.jsx)(F,{top_header_data:[{label:"TOTAL FAMILY",value:t,color:"red"},{label:"TOTAL MEMBER",value:i,color:"blue"},{label:"WARD FAMILY",value:j,color:"green"},{label:"WARD MEMBERS",value:f,color:"orange"}]})}),(0,a.jsx)(s.ZP,{container:!0,sx:{background:"#FFF",borderRadius:6},children:(0,a.jsx)(s.ZP,{item:!0,xs:12,md:12,lg:12,sx:{background:"#FFF",borderRadius:6},children:(0,a.jsx)("div",{style:{display:"table",tableLayout:"fixed",width:"100%",maxHeight:"400px"},children:(0,a.jsxs)(r.Z,{sx:{width:"100%",overflow:"hidden"},children:[(0,a.jsx)(R.Z,{sx:{maxHeight:400,height:400},children:(0,a.jsxs)(z.Z,{stickyHeader:!0,"aria-label":"sticky table",children:[(0,a.jsx)(L.Z,{children:(0,a.jsx)(q.Z,{children:A.map(e=>(0,a.jsx)(N.Z,{align:e.align,style:{minWidth:e.minWidth,background:"#074465",color:"#FFF"},children:e.label},e.id))})}),(0,a.jsx)(W.Z,{children:(null==C?void 0:C.content)&&(null==C?void 0:C.content.slice(J*V,J*V+V).map(e=>(0,a.jsx)(q.Z,{hover:!0,role:"checkbox",tabIndex:-1,children:A.map(t=>{let i=e[t.id];return(0,a.jsx)(N.Z,{align:t.align,onClick:t=>{console.log(e,"Asdjkuiwhqdjwknshfewdsk"),k(e),B(!0),X(w(e.himParivarId,e.rationCardNo))},children:t.format&&"number"==typeof i?t.format(i):i},t.id)})},e.code)))})]})}),(0,a.jsx)(M.Z,{rowsPerPageOptions:[5,10,20],component:"div",count:(null==C?void 0:C.content)?null==C?void 0:C.content.length:0,rowsPerPage:V,page:J,onPageChange:ei,onRowsPerPageChange:ea})]})})})}),(0,a.jsx)("div",{className:"p-4 flex-grow",children:(0,a.jsx)(l.Z,{open:U,onClose:()=>{Y(!1)},"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,a.jsx)(o.Z,{sx:E,children:(0,a.jsxs)("div",{style:{},children:[(0,a.jsxs)(s.ZP,{container:!0,spacing:2,children:[(0,a.jsx)(s.ZP,{item:!0,xs:11.5,children:(0,a.jsx)(x.Z,{fontWeight:"600",style:{fontSize:20},color:"black",children:"Member Details"})}),(0,a.jsx)(s.ZP,{item:!0,xs:.5,style:{justifyContent:"flex-end",alignContent:"flex-end",alignItems:"flex-end"},children:(0,a.jsx)(d.Z,{"aria-label":"delete",size:"small",onClick:()=>Y(!1),children:(0,a.jsx)(u.Z,{fontSize:"medium"})})})]}),(0,a.jsx)(c.Z,{variant:"fullWidth",horizontal:!0,style:{marginTop:10,marginBottom:10}}),(null==T?void 0:T.members)&&(null==T?void 0:T.members.map((e,t)=>(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(r.Z,{elevation:3,variant:"elevation",style:{marginBottom:16},children:[(0,a.jsxs)(x.Z,{style:{fontSize:16,fontWeight:"bold",letterSpacing:.5,background:"#074465",padding:10,color:"#FFF"},children:["Member Name: ",e.memberName]}),(0,a.jsxs)(o.Z,{style:{padding:10},children:[(0,a.jsxs)(s.ZP,{container:!0,spacing:1,children:[(0,a.jsx)(s.ZP,{item:!0,xs:12,sm:2,children:(0,a.jsx)(x.Z,{style:{fontSize:14,fontWeight:"bold",letterSpacing:.5},children:"Name:"})}),(0,a.jsx)(s.ZP,{item:!0,xs:12,sm:4,children:(0,a.jsx)(x.Z,{style:{fontSize:14,letterSpacing:.5},children:e.memberName})}),(0,a.jsx)(s.ZP,{item:!0,xs:12,sm:2,children:(0,a.jsx)(x.Z,{style:{fontSize:14,fontWeight:"bold",letterSpacing:.5},children:"Date of Birth:"})}),(0,a.jsx)(s.ZP,{item:!0,xs:12,sm:4,children:(0,a.jsx)(x.Z,{style:{fontSize:14,letterSpacing:.5},children:e.dateOfBirth})})]}),(0,a.jsxs)(s.ZP,{container:!0,spacing:1,mt:1,children:[(0,a.jsx)(s.ZP,{item:!0,xs:12,sm:2,children:(0,a.jsx)(x.Z,{style:{fontSize:14,fontWeight:"bold",letterSpacing:.5},children:"Gender:"})}),(0,a.jsx)(s.ZP,{item:!0,xs:12,sm:4,children:(0,a.jsx)(x.Z,{style:{fontSize:14,letterSpacing:.5},children:e.gender})}),(0,a.jsx)(s.ZP,{item:!0,xs:12,sm:2,children:(0,a.jsx)(x.Z,{style:{fontSize:14,fontWeight:"bold",letterSpacing:.5},children:"Qualification:"})}),(0,a.jsx)(s.ZP,{item:!0,xs:12,sm:4,children:(0,a.jsx)(x.Z,{style:{fontSize:14,letterSpacing:.5},children:e.educationQualification})})]}),(0,a.jsxs)(s.ZP,{container:!0,spacing:1,mt:1,children:[(0,a.jsx)(s.ZP,{item:!0,xs:12,sm:2,children:(0,a.jsx)(x.Z,{style:{fontSize:14,fontWeight:"bold",letterSpacing:.5},children:"Relation:"})}),(0,a.jsx)(s.ZP,{item:!0,xs:12,sm:4,children:(0,a.jsx)(x.Z,{style:{fontSize:14,letterSpacing:.5},children:e.relation})}),(0,a.jsx)(s.ZP,{item:!0,xs:12,sm:2,children:(0,a.jsx)(x.Z,{style:{fontSize:14,fontWeight:"bold",letterSpacing:.5},children:"Relative Name:"})}),(0,a.jsx)(s.ZP,{item:!0,xs:12,sm:4,children:(0,a.jsx)(x.Z,{style:{fontSize:14,letterSpacing:.5},children:e.relativeName})})]}),(0,a.jsxs)(s.ZP,{container:!0,spacing:1,mt:1,children:[(0,a.jsx)(s.ZP,{item:!0,xs:12,sm:2,children:(0,a.jsx)(x.Z,{style:{fontSize:14,fontWeight:"bold",letterSpacing:.5},children:"Ration Number::"})}),(0,a.jsx)(s.ZP,{item:!0,xs:12,sm:4,children:(0,a.jsx)(x.Z,{style:{fontSize:14,letterSpacing:.5},children:e.rationCardNumber})}),(0,a.jsx)(s.ZP,{item:!0,xs:12,sm:2,children:(0,a.jsx)(x.Z,{style:{fontSize:14,fontWeight:"bold",letterSpacing:.5},children:"Aadhaar Number:"})}),(0,a.jsx)(s.ZP,{item:!0,xs:12,sm:4,children:(0,a.jsx)(x.Z,{style:{fontSize:14,letterSpacing:.5},children:e.aadhaarNumber})})]}),(0,a.jsxs)(s.ZP,{container:!0,spacing:1,mt:1,children:[(0,a.jsx)(s.ZP,{item:!0,xs:12,sm:2,children:(0,a.jsx)(x.Z,{style:{fontSize:14,fontWeight:"bold",letterSpacing:.5},children:"Mobile Number:"})}),(0,a.jsx)(s.ZP,{item:!0,xs:12,sm:4,children:(0,a.jsx)(x.Z,{style:{fontSize:14,letterSpacing:.5},children:e.mobileNumber})}),(0,a.jsx)(s.ZP,{item:!0,xs:12,sm:2,children:(0,a.jsx)(x.Z,{style:{fontSize:14,fontWeight:"bold",letterSpacing:.5},children:"E-KYC:"})}),(0,a.jsx)(s.ZP,{item:!0,xs:12,sm:4,children:(0,a.jsx)(x.Z,{style:{fontSize:16,letterSpacing:.5},children:e.isEkycVerfied?(0,a.jsx)(h.Z,{icon:(0,a.jsx)(g.Z,{fontSize:"small",color:"success"}),label:"Verified",style:{height:20}}):(0,a.jsx)(h.Z,{icon:(0,a.jsx)(p.Z,{color:"error",fontSize:"small"}),label:"Not Verified",style:{height:20}})})})]})]})]})})))]})})})})]})};var T=i(5044),D=i(3788),_=i(662),B=i(1163),O=function(e){let[t,i]=n.useState(!1),[s,r]=n.useState([]),[l,o]=n.useState([0]),[d,c]=n.useState([0]),[h,x]=n.useState({totalFamilyCount:0,totalMemberCount:0,wardFamilyCount:0,wardMemberCount:0}),g=(0,_.LP)(),u=(0,B.useRouter)(),p=(0,m.I0)(),j=(0,m.v9)(e=>e.dashboard);return(0,n.useEffect)(()=>{let e={};try{e=JSON.parse(g)}catch(t){console.log(t,"asasdwie")}if(console.log(e,"asjdkjoiqlkmwjefijoqdwlks"),e){let{userName:i,ulb:a,token:n,wardName:s,districtName:r}=e||{};if(a){let{wardNo:l,wardName:o,municipalName:d,municipalId:h,id:x,districtCode:m}=a||{};l&&(c(x),p((0,T.Jq)(x,n)))}}},[]),(0,n.useEffect)(()=>{if(console.log(j,"Asdjkakasdasdqwusdjquakodlw"),j.error&&(console.log(j.error,"Asasdasqwdjkakasdasdqwusdjquakodlw"),j.error.message&&j.error.message.includes("401")&&((0,_.gy)(),u.push("/login"))),j){let{data:e,message:t,status:i}=j.data||{};console.log(e,"asdoiqakmdlasdqweklfmqamfjewoqdal"),"SUCCESS"===t&&"OK"===i&&x(e)}},[j]),(0,a.jsx)(D.Z,{children:(0,a.jsx)(I,{dashboardData:h,wardId:d})})}},662:function(e,t,i){i.d(t,{Fr:function(){return n},LP:function(){return s},gy:function(){return r}});var a=i(1955);let n=e=>{console.log(e,"save token"),a.Z.set("authToken",e,{expires:1})},s=()=>a.Z.get("authToken"),r=()=>{a.Z.remove("authToken")}}}]);